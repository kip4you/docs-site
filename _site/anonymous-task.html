<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.17.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Kip4You</title>
<meta name="description" content="A passionate team to investigate  aspects related to Agile and Knowledge Intensive Processes.">


  <meta name="author" content="Kip4You Team">


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Kip4You">
<meta property="og:title" content="Kip4You">
<meta property="og:url" content="http://0.0.0.0:4000/anonymous-task">


  <meta property="og:description" content="A passionate team to investigate  aspects related to Agile and Knowledge Intensive Processes.">











  

  


<link rel="canonical" href="http://0.0.0.0:4000/anonymous-task">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Kip4You Team",
      "url": "http://0.0.0.0:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Kip4You Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/kip4you-docs-logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Kip4You
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/about-kip4you-pap"><span class="nav__sub-title">About</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Fundamentals</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/native-features" class="">Native Features</a></li>
          
            
            

            
            

            <li><a href="/agility" class="">Agility</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Developers</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/tenants" class="">Tenants</a></li>
          
            
            

            
            

            <li><a href="/deployment-properties" class="">Deployment Properties</a></li>
          
            
            

            
            

            <li><a href="/guest-users" class="">Guest Users</a></li>
          
            
            

            
            

            <li><a href="/attachments" class="">Attachments</a></li>
          
            
            

            
            

            <li><a href="/notes" class="">Notes</a></li>
          
            
            

            
            

            <li><a href="/search-framework" class="">Search Framework</a></li>
          
            
            

            
            

            <li><a href="/dashboards-basic" class="">Basic Dashboards</a></li>
          
            
            

            
            

            <li><a href="/dashboards-advanced" class="">Advanced Dashboards</a></li>
          
            
            

            
            

            <li><a href="/dashboards-on-the-fly" class="">On-the-fly Dashboards</a></li>
          
            
            

            
            

            <li><a href="/connector-email" class="">Email Connector</a></li>
          
            
            

            
            

            <li><a href="/connector-rest-api" class="">Rest API Connector</a></li>
          
            
            

            
            

            <li><a href="/connector-activemq" class="">ActiveMQ Connector</a></li>
          
            
            

            
            

            <li><a href="/dynamic-forms" class="">Dynamic Forms</a></li>
          
            
            

            
            

            <li><a href="/subprocess" class="">Subprocess</a></li>
          
            
            

            
            

            <li><a href="/anonymous-task" class="active">Anonymous Task</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    <meta itemprop="dateModified" content="August 07, 2022">

    <div class="page__inner-wrap">
      
        <header>
          
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#anonymous-task">Anonymous Task</a>
    <ul>
      <li><a href="#what-is-an-anonymous-task">What is an Anonymous Task?</a></li>
      <li><a href="#1-camunda">1. Camunda</a></li>
      <li><a href="#2-project-generation">2. Project Generation</a></li>
      <li><a href="#3-into-the-code-backend">3. Into the code (backend)</a></li>
      <li><a href="#4-into-the-code-frontend">4. Into the code (frontend)</a></li>
      <li><a href="#5-configuring-the-routes">5. Configuring the routes</a></li>
      <li><a href="#6-email-content">6. Email content</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <h1 id="anonymous-task">Anonymous Task</h1>

<h2 id="what-is-an-anonymous-task">What is an Anonymous Task?</h2>

<p>Anonymous Task is an activity where we can access a task anonymously, in other words, it will have an email that contains a link to lead you to the task without the need to have an account in the website, accessing as if a guest.</p>

<h2 id="1-camunda">1. Camunda</h2>

<p>Initially we need to create a Camunda BPMN to organize our process flow, to this in this tutorial we’ll use the Quote Item example.</p>

<p><img src="assets/images/anonymous-task/TaskQuoteItem.png" alt="Task Quote Item in Camunda BPMN" /></p>

<p>The Quote Item, will be our anonymous task, but to turn this activity into an anonymous one we’ll need to include other two tasks before the User Task, being these the Service Task (Akip Configure Anonymous Task) and a Send Task (Email to Provider) that we’ll send a link with a token to access the activity anonymously.
This way:</p>

<p><img src="assets/images/anonymous-task/QuoteItemAnonimo.png" alt="Service Task, Send Task and then the Quote Item task" /></p>

<p>Clicking in the Service Task (Akip Configure Anonymous Task) we must indicate in the delegate section <strong>${akipConfigureAnonymousTaskDelegate}</strong> that refers to an existing compiled class in the architecture of reference.</p>

<p><img src="assets/images/anonymous-task/BPMNconfig.png" alt="Service Task delegate configuration" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>In the Send Task (Email to Provider) we need to first add in Implementation a <strong>Delegate expression</strong> and the expression ${akipEmailConnectorDelegate} calling a delegate that will be generated with the project referring to a compiled class.</p>

<p><img src="./assets/images/anonymous-task/EmailConnector.png" alt="Send Task Implementation" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>Also in the Send Task (Email to Provider) we must add a field injection, putting the name <strong>akipEmailConnectorConfigName</strong>, type <strong>String</strong> and then the value <strong>QuotationProcess.EmailToProvider</strong> (name of the process dot name of the task)</p>

<p><img src="./assets/images/anonymous-task/EmailFieldInj.png" alt="Send Task Field Injection" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>The last Camunda configuration we need to do is in the User Task Quote Item, adding <strong>anonymousUser</strong> to the candidate groups.</p>

<p><img src="./assets/images/anonymous-task/UserTaskCandidate.png" alt="User Task Candidate groups" style="display:block; margin-left:auto; margin-right:auto" /></p>

<h2 id="2-project-generation">2. Project Generation</h2>

<p>Before we pass to the coding the anonymous task, we need first to install the AgileKIP Generator to execute the project using the jhipster blueprint, after this we need to create the metadata of the domain, entities and their relations. To create the project step by step it’s recommended to read the tutorial <a href="https://agilekip.github.io/pap-documentation/tutorials/generating-an-app" style="color: blue">here</a></p>

<h2 id="3-into-the-code-backend">3. Into the code (backend)</h2>

<p>In the code of the generated project, initially we need to find the file Controller related to the task, in our example is TaskQuoteItemController.</p>

<p><img src="assets/images/anonymous-task/PathController.png" alt="Path to controller" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>It’s indicated that in the Controller, we change the <strong>@RequestMapping(“/api/…”)</strong> to just <strong>@RequestMapping(“/api”)</strong>, and then in the <strong>@GettingMapping</strong> and <strong>PostMapping</strong> use the part that was removed in the @RequestMapping, like this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api"</span><span class="o">)</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/quotation-process/task-quote-item/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">TaskQuoteItemContextDTO</span><span class="o">&gt;</span> <span class="nf">loadContext</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"REST request to load the context of task hotel {}"</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
        <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="n">taskQuoteItemService</span><span class="o">.</span><span class="na">loadContext</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>After this, for each one of the <strong>@GetMapping</strong> and <strong>@PostMapping</strong> we must do copies with some changes, informing the paths that will be public utilized for the Anonymous Task.</p>

<p>In the image below, when we create the copy for each one, we must pass in the start of the URL the <strong>“/public”</strong> to indicate that this will be a public URL, moreover in the final os the URL we need to write the id of the process instance (<strong>processInstanceId</strong>) informing the instance of the process, as well as the Token (<strong>accessTokenNumber</strong>) that will be generated unique for each provider that need to quote items in our case.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/public/quotation-process/task-quote-item/{processInstanceId}/{accessTokenNumber}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">TaskQuoteItemContextDTO</span><span class="o">&gt;</span> <span class="nf">loadContextPublic</span><span class="o">(</span>
        <span class="nd">@PathVariable</span> <span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span>
        <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"REST request to load the context of task hotel {}"</span><span class="o">,</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="n">taskQuoteItemService</span><span class="o">.</span><span class="na">loadContextPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>In addition, we must replace the method <strong>loadContext</strong> to <strong>loadContextPublic</strong> and pass the two variables of the URL, <strong>processInstanceId</strong> and <strong>accessTokenNumber</strong> as parameters. The creation of this method will be done in a step further.</p>

<p>We must change the <strong>log.debug</strong>, passing again the respective variables, <strong>processInstanceId</strong> and <strong>accessTokenNumber</strong>.</p>

<p>Lastly, we use the instance of the service in our task, passing now <strong>loadContextPublic</strong> and the two parameters, <strong>processInstanceId</strong> and <strong>accessTokenNumber</strong>. Following this same logic we gonna create a copy of <strong>claim</strong>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/public/quotation-process/task-quote-item/{processInstanceId}/{accessTokenNumber}/claim"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">TaskQuoteItemContextDTO</span><span class="o">&gt;</span> <span class="nf">claimPublic</span><span class="o">(</span>
    <span class="nd">@PathVariable</span> <span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span>
    <span class="nd">@PathVariable</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span>
        <span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"REST request to load the context of task hotel {}"</span><span class="o">,</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="n">taskQuoteItemService</span><span class="o">.</span><span class="na">claimPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
        <span class="o">}</span>
</code></pre></div></div>

<p>When we create the copy of the complete, we only need to change the URL adding the <strong>“/public/”</strong> in the start, and the name of the method complete to <strong>completePublic</strong>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"public/quotation-process/task-quote-item/complete"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">Void</span><span class="o">&gt;</span> <span class="nf">completePublic</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"REST request to complete QuotationProcess.TaskQuoteItem {}"</span><span class="o">,</span> <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getTaskInstance</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>
        <span class="n">taskQuoteItemService</span><span class="o">.</span><span class="na">complete</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">noContent</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>With this we finished the necessary changes for the Controller in the Anonymous Task. The next step is to implement the public methods that we create (loadContextPublic, claimPublic and completePublic). To do this we’ll go to the Service located in:</p>

<p><img src="./assets/images/anonymous-task/ServiceMarcado.png" alt="Location of the Service in the backend" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>In the Service, we are going to implement the following public methods called in the Controller:</p>

<p><strong>loadContextPublic:</strong> As in the image bellow we have a findBy that will be created in the next steps in the Repository file during the process, beyond that the messages in the <strong>BadRequestErrorException</strong> you can put a specific one respectively, “Invalid accessTokenNumber” and “Task not found”.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">TaskQuoteItemContextDTO</span> <span class="nf">loadContextPublic</span><span class="o">(</span><span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">quotationProcessRepository</span>
            <span class="o">.</span><span class="na">findByProcessInstanceIdAndProcessInstanceAccessTokenNumber</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">BadRequestErrorException</span><span class="o">(</span><span class="s">"Invalid AccessTokenNumber"</span><span class="o">));</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TaskInstance</span><span class="o">&gt;</span> <span class="n">taskInstances</span> <span class="o">=</span> <span class="n">taskInstanceRepository</span><span class="o">.</span><span class="na">findByTaskDefinitionKeyAndProcessInstanceIdAndProcessInstanceAccessTokenNumberOrderByIdDesc</span><span class="o">(</span>
            <span class="no">TASK_QUOTE_ITEM</span><span class="o">,</span>
            <span class="n">processInstanceId</span><span class="o">,</span>
            <span class="n">accessTokenNumber</span>
        <span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">taskInstances</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadRequestErrorException</span><span class="o">(</span><span class="s">"Task not found"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kt">var</span> <span class="n">taskInstanceDTO</span> <span class="o">=</span> <span class="n">taskInstanceMapper</span><span class="o">.</span><span class="na">toDTOLoadTaskContext</span><span class="o">(</span><span class="n">taskInstances</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>

        <span class="nc">QuotationProcessDTO</span> <span class="n">quotationProcess</span> <span class="o">=</span> <span class="n">quotationProcessRepository</span>
            <span class="o">.</span><span class="na">findByProcessInstanceId</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">taskQuoteItemMapper:</span><span class="o">:</span><span class="n">toQuotationProcessDTO</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">();</span>

        <span class="kt">var</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TaskQuoteItemContextDTO</span><span class="o">();</span>
        <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">setTaskInstance</span><span class="o">(</span><span class="n">taskInstanceDTO</span><span class="o">);</span>
        <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">setQuotationProcess</span><span class="o">(</span><span class="n">quotationProcess</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">taskQuoteItemContext</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><strong>claimPublic:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="nc">TaskQuoteItemContextDTO</span> <span class="nf">claimPublic</span><span class="o">(</span><span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="n">loadContextPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getTaskInstance</span><span class="o">().</span><span class="na">getStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">StatusQuotation</span><span class="o">.</span><span class="na">APPROVED</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">taskInstanceService</span><span class="o">.</span><span class="na">claim</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getTaskInstance</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">taskQuoteItemContext</span><span class="o">;</span>
        <span class="o">}</span>
</code></pre></div></div>

<p><strong>completePublic:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">completePublic</span><span class="o">(</span><span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">quotationProcessRepository</span>
        <span class="o">.</span><span class="na">findByProcessInstanceIdAndProcessInstanceAccessTokenNumber</span><span class="o">(</span>
        <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getQuotationProcess</span><span class="o">().</span><span class="na">getProcessInstance</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span>
        <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getQuotationProcess</span><span class="o">().</span><span class="na">getProcessInstance</span><span class="o">().</span><span class="na">getAccessTokenNumber</span><span class="o">()</span>
        <span class="o">)</span>
        <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">BadRequestErrorException</span><span class="o">(</span><span class="s">"kipappProcurementApp.quotationProcess.error.tokenNotFound"</span><span class="o">));</span>

        <span class="n">complete</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
        <span class="o">}</span>
</code></pre></div></div>

<p>Next step is defining in the Repository of the process (in my case TaskQuoteItemRepository) this Optional:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">QuotationProcess</span><span class="o">&gt;</span> <span class="nf">findByProcessInstanceIdAndProcessInstanceAccessTokenNumber</span><span class="o">(</span><span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
</code></pre></div></div>

<h2 id="4-into-the-code-frontend">4. Into the code (frontend)</h2>

<p>With the backend organized, we’ll start the frontend accessing the directory:</p>

<p>src &gt; main &gt; webapp &gt; app &gt; entities &gt; name of the process &gt; name of the task</p>

<p>First we open the <strong>service.ts</strong> of the task, inside we create a const <strong>baseApiUrlPublic</strong>, similar with the const that already exists <strong>baseApiUrl</strong>. The unique difference is that between the api and te name of the process we add public staying like this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="n">baseApiUrlPublic</span> <span class="o">=</span> <span class="err">'</span><span class="n">api</span><span class="o">/</span><span class="kd">public</span><span class="o">/</span><span class="n">quotation</span><span class="o">-</span><span class="n">process</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="err">'</span><span class="o">;</span>
<span class="kd">const</span> <span class="n">baseApiUrl</span> <span class="o">=</span> <span class="err">'</span><span class="n">api</span><span class="o">/</span><span class="n">quotation</span><span class="o">-</span><span class="n">process</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="err">'</span><span class="o">;</span>
</code></pre></div></div>

<p>After this, we create the methods <strong>loadContextPublic</strong>, <strong>claimPublic</strong> and <strong>completedPublic</strong>, where their gets and posts follow the same way that was created in the Controller of the task.</p>

<p><strong>loadContextPublic:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">loadContextPublic</span><span class="o">(</span><span class="nl">processInstanceId:</span> <span class="n">number</span><span class="o">,</span> <span class="nl">accessTokenNumber:</span> <span class="n">string</span><span class="o">):</span> <span class="nc">Promise</span><span class="o">&lt;</span><span class="nc">TaskQuoteItemContext</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nc">Promise</span><span class="o">&lt;</span><span class="nc">TaskQuoteItemContext</span><span class="o">&gt;((</span><span class="n">resolve</span><span class="o">,</span> <span class="n">reject</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="o">{</span>
      <span class="n">axios</span>
        <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="err">`$</span><span class="o">{</span><span class="n">baseApiUrlPublic</span><span class="o">}/</span><span class="err">$</span><span class="o">{</span><span class="n">processInstanceId</span><span class="o">}/</span><span class="err">$</span><span class="o">{</span><span class="n">accessTokenNumber</span><span class="o">}</span><span class="err">`</span><span class="o">)</span>
        <span class="o">.</span><span class="na">then</span><span class="o">(</span><span class="n">res</span> <span class="o">=&gt;</span> <span class="o">{</span>
          <span class="n">resolve</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
        <span class="o">})</span>
        <span class="o">.</span><span class="na">catch</span><span class="o">(</span><span class="n">err</span> <span class="o">=&gt;</span> <span class="o">{</span>
          <span class="n">reject</span><span class="o">(</span><span class="n">err</span><span class="o">);</span>
        <span class="o">});</span>
    <span class="o">});</span>
  <span class="o">}</span>
</code></pre></div></div>

<p><strong>claimPublic:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">TaskQuoteItemContextDTO</span> <span class="nf">claimPublic</span><span class="o">(</span><span class="nc">Long</span> <span class="n">processInstanceId</span><span class="o">,</span> <span class="nc">String</span> <span class="n">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span> <span class="o">=</span> <span class="n">loadContextPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getTaskInstance</span><span class="o">().</span><span class="na">getStatus</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">StatusQuotation</span><span class="o">.</span><span class="na">APPROVED</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">taskInstanceService</span><span class="o">.</span><span class="na">claim</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getTaskInstance</span><span class="o">().</span><span class="na">getId</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">taskQuoteItemContext</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p><strong>completePublic:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">completePublic</span><span class="o">(</span><span class="nc">TaskQuoteItemContextDTO</span> <span class="n">taskQuoteItemContext</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">quotationProcessRepository</span>
            <span class="o">.</span><span class="na">findByProcessInstanceIdAndProcessInstanceAccessTokenNumber</span><span class="o">(</span>
                <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getQuotationProcess</span><span class="o">().</span><span class="na">getProcessInstance</span><span class="o">().</span><span class="na">getId</span><span class="o">(),</span>
                <span class="n">taskQuoteItemContext</span><span class="o">.</span><span class="na">getQuotationProcess</span><span class="o">().</span><span class="na">getProcessInstance</span><span class="o">().</span><span class="na">getAccessTokenNumber</span><span class="o">()</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">BadRequestErrorException</span><span class="o">(</span><span class="s">"kipappProcurementApp.quotationProcess.error.tokenNotFound"</span><span class="o">));</span>

        <span class="n">complete</span><span class="o">(</span><span class="n">taskQuoteItemContext</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>When we generate the project and consequently the task that we are configuring, we already have files like <strong>details.component.ts</strong>, <strong>details.vue</strong>, <strong>execute.component.ts</strong> and <strong>execute.vue</strong>. As we’ll have an anonymous page, we must create public files.</p>

<p>For this we need to copy the <strong>details.component.ts</strong> and rename to <strong>public-details.component.ts</strong>. In the component we’ll change the name of the class, create an attribute with the name <strong>accessTokenNumber</strong> of string type initializing null.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="n">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nc">TaskQuoteItemPublicDetailsComponent</span> <span class="kd">extends</span> <span class="nc">Vue</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nl">taskQuoteItemService:</span> <span class="nc">TaskQuoteItemService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TaskQuoteItemService</span><span class="o">();</span>
  <span class="kd">private</span> <span class="nl">taskContext:</span> <span class="nc">TaskQuoteItemContext</span> <span class="o">=</span> <span class="o">{};</span>
  <span class="kd">private</span> <span class="nl">accessTokenNumber:</span> <span class="n">string</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div></div>

<p>In the <strong>beforeRouteEnter</strong> method, we change the if condition passing the <strong>to.params.processInstanceId</strong> and the <strong>to.params.accessTokenNumber</strong>, after alter this we pass the parameter value (to.params.accessTokenNumber) to the variable <strong>vm.accessTokenNumber</strong> created before, and call the method <strong>retrieveContext</strong> passing again the <strong>to.params.processInstanceId</strong> and the <strong>to.params.accessTokenNumber</strong>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">beforeRouteEnter</span><span class="o">(</span><span class="n">to</span><span class="o">,</span> <span class="n">from</span><span class="o">,</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">next</span><span class="o">(</span><span class="n">vm</span> <span class="o">=&gt;</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">processInstanceId</span> <span class="o">&amp;&amp;</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">vm</span><span class="o">.</span><span class="na">accessTokenNumber</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">;</span>
        <span class="n">vm</span><span class="o">.</span><span class="na">retrieveContext</span><span class="o">(</span><span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">processInstanceId</span><span class="o">,</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">});</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>Inside the retrieveContext method we call the method <strong>loadContextPublic</strong> passing <strong>processInstanceId</strong> and <strong>accessTokenNumber</strong>, finishing the public-details.component.ts.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">retrieveContext</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">taskQuoteItemService</span><span class="o">.</span><span class="na">loadContextPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="n">res</span> <span class="o">=&gt;</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">taskContext</span> <span class="o">=</span> <span class="n">res</span><span class="o">;</span>
    <span class="o">});</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>Then we must copy the <strong>details.vue</strong> and rename to <strong>public-details.vue</strong>, and just change the <strong>:to</strong> of <strong>router-link</strong> similar to the URL bellow, being the place where QuotationProcess is, you substitute for the name of your process and then the name of the task, that in this example is TaskQuoteItem. To the typescript that we did before work, we must correct the path to the <strong>public-details.component.ts</strong>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">router</span><span class="o">-</span><span class="n">link</span>
          <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s">"taskContext.taskInstance.status == 'NEW' || taskContext.taskInstance.status == 'ASSIGNED'"</span>
          <span class="o">:</span><span class="n">to</span><span class="o">=</span><span class="s">"`/public/process-definition/QuotationProcess/${taskContext.quotationProcess.processInstance.id}/TaskQuoteItem/${accessTokenNumber}/execute`"</span>
          <span class="n">tag</span><span class="o">=</span><span class="s">"button"</span>
          <span class="kd">class</span><span class="err">="</span><span class="nc">btn</span> <span class="n">btn</span><span class="o">-</span><span class="n">primary</span><span class="s">"
          data-cy="</span><span class="n">entityDetailsButton</span><span class="s">"
        &gt;
          &lt;font-awesome-icon icon="</span><span class="n">play</span><span class="s">"&gt;&lt;/font-awesome-icon&gt;&amp;nbsp;Execute
        &lt;/router-link&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="</span><span class="n">ts</span><span class="s">" src="</span><span class="o">./</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="kd">public</span><span class="o">-</span><span class="n">details</span><span class="o">.</span><span class="na">component</span><span class="o">.</span><span class="na">ts</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Next we need to copy the file execute.component.ts and paste renaming to public-execute.component.ts. Then we’ll do changes same as before, rename the class and initiate a variable accessTokenNumber, type string with the value null.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span><span class="o">({</span>
        <span class="n">validations</span><span class="o">,</span>
<span class="o">})</span>
<span class="n">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nc">TaskQuoteItemPublicExecuteComponent</span> <span class="kd">extends</span> <span class="nf">mixins</span><span class="o">(</span><span class="nc">NotifyMixin</span><span class="o">)</span> <span class="o">{</span>
<span class="kd">private</span> <span class="nl">taskQuoteItemService:</span> <span class="nc">TaskQuoteItemService</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TaskQuoteItemService</span><span class="o">();</span>
<span class="kd">private</span> <span class="nl">taskContext:</span> <span class="nc">TaskQuoteItemContext</span> <span class="o">=</span> <span class="o">{};</span>
<span class="kd">public</span> <span class="n">isSaving</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="kd">public</span> <span class="nl">accessTokenNumber:</span> <span class="n">string</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div></div>

<p>In the beforeRouteEnter we change the condition of the if passing <strong>to.params.processInstanceId</strong> and <strong>accessTokenNumber</strong>, then the vm.accessTokenNumber receiving to.params.accessTokenNumber. After call vm.claimTaskInstance passing as parameters again <strong>to.params.processInstanceId</strong> and <strong>to.params.accessTokenNumber</strong>;</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">beforeRouteEnter</span><span class="o">(</span><span class="n">to</span><span class="o">,</span> <span class="n">from</span><span class="o">,</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">next</span><span class="o">(</span><span class="n">vm</span> <span class="o">=&gt;</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">processInstanceId</span> <span class="o">&amp;&amp;</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">vm</span><span class="o">.</span><span class="na">accessTokenNumber</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">;</span>
        <span class="n">vm</span><span class="o">.</span><span class="na">claimTaskInstance</span><span class="o">(</span><span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">processInstanceId</span><span class="o">,</span> <span class="n">to</span><span class="o">.</span><span class="na">params</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="o">});</span>
        <span class="o">}</span>
</code></pre></div></div>

<p>In the claimTaskInstance method we pass <strong>processInstanceId</strong> and <strong>accessTokenNumber</strong> as parameters and we’ll replace the call for claim method to claimPublic passing again the same two parameters.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">claimTaskInstance</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">taskQuoteItemService</span>
        <span class="o">.</span><span class="na">claimPublic</span><span class="o">(</span><span class="n">processInstanceId</span><span class="o">,</span> <span class="n">accessTokenNumber</span><span class="o">)</span>
        <span class="o">.</span><span class="na">then</span><span class="o">(</span><span class="n">res</span> <span class="o">=&gt;</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">taskContext</span> <span class="o">=</span> <span class="n">res</span><span class="o">;</span>
        <span class="o">})</span>
        <span class="o">.</span><span class="na">catch</span><span class="o">(</span><span class="n">err</span> <span class="o">=&gt;</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">notifyErrorFromResponse</span><span class="o">(</span><span class="n">err</span><span class="o">);</span>
        <span class="o">});</span>
        <span class="o">}</span>
</code></pre></div></div>

<p>To finish the public-execute.component.ts in the method complete() we’ll change the method called complete to completePublic, and then where is name we put a name for the route that we’ll register later (remember this), and for the params first we put processInstanceId and accessTokenNumber like the code bellow:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">complete</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">taskQuoteItemService</span><span class="o">.</span><span class="na">completePublic</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">taskContext</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="n">res</span> <span class="o">=&gt;</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="n">$router</span><span class="o">.</span><span class="na">push</span><span class="o">({</span>
        <span class="nl">name:</span> <span class="err">'</span><span class="n">Public_QuotationProcess_TaskQuoteItemDetails</span><span class="err">'</span><span class="o">,</span>
        <span class="nl">params:</span> <span class="o">{</span>
          <span class="nl">processInstanceId:</span> <span class="err">`$</span><span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">taskContext</span><span class="o">.</span><span class="na">quotationProcess</span><span class="o">.</span><span class="na">processInstance</span><span class="o">.</span><span class="na">id</span><span class="o">}</span><span class="err">`</span><span class="o">,</span>
          <span class="nl">accessTokenNumber:</span> <span class="err">`$</span><span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">accessTokenNumber</span><span class="o">}</span><span class="err">`</span><span class="o">,</span>
        <span class="o">},</span>
      <span class="o">});</span>
    <span class="o">});</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>Now we finished the component, we copy the execute.vue and rename to public-execute.vue just changing the path in the script to the component work.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">script</span> <span class="n">lang</span><span class="o">=</span><span class="s">"ts"</span> <span class="n">src</span><span class="o">=</span><span class="s">"./task-quote-item-public-execute.component.ts"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</code></pre></div></div>

<h2 id="5-configuring-the-routes">5. Configuring the routes</h2>

<p>With public screens created, we have left just the routes and the link to send you to the anonymous task. We’ll access: src &gt; main &gt; webapp &gt; app &gt; router &gt; entities.ts. Create a const like the example bellow referencing the two public .vue screens that we create before.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// prettier-ignore</span>
<span class="kd">const</span> <span class="n">Public_QuotationProcess_TaskQuoteItemDetails</span> <span class="o">=</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="kn">import</span><span class="err">('@/</span><span class="nn">entities</span><span class="o">/</span><span class="n">quotation</span><span class="o">-</span><span class="n">process</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="kd">public</span><span class="o">-</span><span class="n">details</span><span class="o">.</span><span class="na">vue</span><span class="err">'</span><span class="o">);</span>

<span class="c1">// prettier-ignore</span>
<span class="kd">const</span> <span class="n">Public_QuotationProcess_TaskQuoteItemExecute</span> <span class="o">=</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="kn">import</span><span class="err">('@/</span><span class="nn">entities</span><span class="o">/</span><span class="n">quotation</span><span class="o">-</span><span class="n">process</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="o">/</span><span class="n">task</span><span class="o">-</span><span class="n">quote</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="kd">public</span><span class="o">-</span><span class="n">execute</span><span class="o">.</span><span class="na">vue</span><span class="err">'</span><span class="o">);</span>
</code></pre></div></div>

<p>Now just need to create the two routes with the same name referenced in the const. Important to remember that the name we put here need to be the same as we put in the public-execute.component.ts in the method complete().</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
    <span class="nl">path:</span> <span class="err">'</span><span class="o">/</span><span class="kd">public</span><span class="o">/</span><span class="n">process</span><span class="o">-</span><span class="n">definition</span><span class="o">/</span><span class="nc">QuotationProcess</span><span class="o">/:</span><span class="n">processInstanceId</span><span class="o">/</span><span class="nc">TaskQuoteItem</span><span class="o">/:</span><span class="n">accessTokenNumber</span><span class="o">/</span><span class="n">view</span><span class="err">'</span><span class="o">,</span>
    <span class="nl">name:</span> <span class="err">'</span><span class="n">Public_QuotationProcess_TaskQuoteItemDetails</span><span class="err">'</span><span class="o">,</span>
    <span class="nl">component:</span> <span class="n">Public_QuotationProcess_TaskQuoteItemDetails</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="nl">path:</span> <span class="err">'</span><span class="o">/</span><span class="kd">public</span><span class="o">/</span><span class="n">process</span><span class="o">-</span><span class="n">definition</span><span class="o">/</span><span class="nc">QuotationProcess</span><span class="o">/:</span><span class="n">processInstanceId</span><span class="o">/</span><span class="nc">TaskQuoteItem</span><span class="o">/:</span><span class="n">accessTokenNumber</span><span class="o">/</span><span class="n">execute</span><span class="err">'</span><span class="o">,</span>
    <span class="nl">name:</span> <span class="err">'</span><span class="n">Public_QuotationProcess_TaskQuoteItemExecute</span><span class="err">'</span><span class="o">,</span>
    <span class="nl">component:</span> <span class="n">Public_QuotationProcess_TaskQuoteItemExecute</span><span class="o">,</span>
  <span class="o">}</span>
</code></pre></div></div>

<h2 id="6-email-content">6. Email content</h2>

<p>Finally, we are finishing the configuration for anonymous task. For this you need create the content, mailbox and subject files to organize the email, for more information how to create emails access here.</p>

<p>In the content of the email we just need to create a &lt;p&gt;&lt;/p&gt; tags where we’ll add the URL that send us to the anonymous page to do the task.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"${env.getProperty('jhipster.mail.base-url')}/public/process-definition/QuotationProcess/
${processEntity.processInstance.id}/TaskQuoteItem/${processEntity.processInstance.accessTokenNumber}/
view"</span><span class="o">&gt;</span><span class="nc">Click</span> <span class="n">here</span> <span class="n">to</span> <span class="nc">Access</span> <span class="n">the</span> <span class="n">information</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>As a result we’ll have a screen next to this:</p>

<p><img src="./assets/images/anonymous-task/Email.png" alt="Email content" style="display:block; margin-left:auto; margin-right:auto" /></p>

<p>And a link like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost:9000/public/process-definition/QuotationProcess/2004/TaskQuoteItem/a56a21a714b7ca89298d741ae368c45/view
</code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2022-08-07">August 07, 2022</time></p>
        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/kip4youoficial" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/kip4you" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Kip4You Team. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
